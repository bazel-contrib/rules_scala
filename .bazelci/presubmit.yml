--- 
tasks: 
  examples_ubuntu2004: 
    name: ./test_examples
    platform: ubuntu2004
    shell_commands: 
      - ./test_examples.sh
  lint_ubuntu2004: 
    name: "bazel //tools:lint_check"
    platform: ubuntu2004
    run_targets: 
      - "//tools:lint_check"
  macos: 
    build_targets: 
      - //test/...
    name: "bazel test //test/..."
    platform: macos
    shell_commands: 
      - "mv tools/bazel.rc.buildkite tools/bazel.rc"
      - "echo \"import %workspace%/tools/bazel.rc\" > .bazelrc"
    test_targets: 
      - //test/...
  rbe_ubuntu1604: 
    build_targets: 
      - //test/...
    name: "bazel test //test/..."
    platform: rbe_ubuntu1604
    test_targets: 
      - //test/...
  test_reproducibility_linux: 
    name: ./test_reproducibility.sh
    platform: ubuntu1804
    shell_commands: 
      - ./test_reproducibility.sh
  test_reproducibility_macos: 
    name: ./test_reproducibility.sh
    platform: macos
    shell_commands: 
      - ./test_reproducibility.sh
  test_rules_scala_linux: 
    name: ./test_rules_scala
    platform: ubuntu1804
    shell_commands: 
      - ./test_rules_scala.sh
  test_rules_scala_linux_latest: 
    bazel: latest
    name: "./test_rules_scala (latest bazel)"
    platform: ubuntu1804
    shell_commands: 
      - "./test_rules_scala.sh || buildkite-agent annotate --style 'warning' \"Latest version failed to run! [See here](${BUILDKITE_BUILD_URL}#${BUILDKITE_STEP_ID})\""
  test_rules_scala_macos: 
    name: ./test_rules_scala
    platform: macos
    shell_commands: 
      - ./test_rules_scala.sh
  ubuntu1604: 
    build_targets: 
      - //test/...
    name: "bazel test //test/..."
    platform: ubuntu1604
    shell_commands: 
      - "mv tools/bazel.rc.buildkite tools/bazel.rc"
      - "echo \"import %workspace%/tools/bazel.rc\" > .bazelrc"
    test_targets: 
      - //test/...
  ubuntu1804: 
    build_targets: 
      - //test/...
    name: "bazel test //test/..."
    platform: ubuntu1804
    shell_commands: 
      - "mv tools/bazel.rc.buildkite tools/bazel.rc"
      - "echo \"import %workspace%/tools/bazel.rc\" > .bazelrc"
    test_targets: 
      - //test/...
  ubuntu2004: 
    build_targets: 
      - //test/...
    name: "bazel test //test/..."
    platform: ubuntu2004
    shell_commands: 
      - "mv tools/bazel.rc.buildkite tools/bazel.rc"
      - "echo \"import %workspace%/tools/bazel.rc\" > .bazelrc"
    test_targets: 
      - //test/...
  versions_macos: 
    name: ./test_version.sh
    platform: macos
    shell_commands: 
      - ./test_version.sh
  versions_ubuntu2004: 
    name: ./test_version.sh
    platform: ubuntu2004
    shell_commands: 
      - ./test_version.sh
validate_config: 1
